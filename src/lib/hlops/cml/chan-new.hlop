(* chan-new.hlop
 *
 * COPYRIGHT (c) 2007 The Manticore Project (http://manticore.cs.uchicago.edu)
 * All rights reserved.
 *
 * Allocate a new channel.
 *)

#include "events.def"

define inline constr @chan-new (_ : unit / exh : exh) : chan =
    let ch : chan = alloc(FALSE, NIL, NIL, NIL, NIL)
    let ch : chan = promote (ch)
    return (ch)
;
